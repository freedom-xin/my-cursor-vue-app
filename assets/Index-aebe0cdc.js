import{_ as B,r as u,o as n,c as o,a as s,b as F,F as N,d as T,t as i,w as v,v as x,n as _,e as b,f as $,g as w,h as D}from"./index-03198ff5.js";const S={class:"users-container glass"},j={class:"users-content"},z={class:"users-table"},L={class:"action-buttons"},O=["onClick"],P=["onClick"],R={class:"dialog-header"},q={class:"gradient-text"},A={class:"dialog-body"},G={class:"form-items"},H={class:"form-item"},J={class:"input-wrapper glass"},K={key:0,class:"error-tip"},Q={class:"form-item"},W={class:"input-wrapper glass"},X={key:0,class:"error-tip"},Y={class:"form-item"},Z={class:"select-wrapper glass"},ss={class:"form-item"},ls={class:"radio-group"},es={class:"radio-item"},ts={class:"radio-item"},as={class:"dialog-footer"},ns=["disabled"],os={key:0},is={key:1,class:"fas fa-spinner fa-spin"},us={class:"dialog-body"},ds={__name:"Index",setup(rs){const d=u([{id:1,username:"admin",email:"admin@example.com",role:"管理员",status:"active"},{id:2,username:"user1",email:"user1@example.com",role:"普通用户",status:"active"},{id:3,username:"user2",email:"user2@example.com",role:"普通用户",status:"inactive"}]),g=u(!1),k=u(!1),y=u(!1),t=u({}),m=u(null),r=u({}),p=u(!1),U=e=>{y.value=!0,t.value={...e},g.value=!0},V=()=>{const e={};return t.value.username?t.value.username.length<2&&(e.username="用户名至少2个字符"):e.username="请输入用户名",t.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value.email)||(e.email="请输入有效的邮箱地址"):e.email="请输入邮箱",r.value=e,Object.keys(e).length===0},I=async()=>{if(V()){p.value=!0;try{if(await new Promise(e=>setTimeout(e,1e3)),y.value){const e=d.value.findIndex(l=>l.id===t.value.id);e!==-1&&(d.value[e]={...t.value})}else d.value.push({...t.value,id:d.value.length+1});c()}catch(e){console.error("保存失败:",e)}finally{p.value=!1}}},h=e=>{m.value=e,k.value=!0},E=()=>{d.value=d.value.filter(e=>e.id!==m.value.id),f()},c=()=>{g.value=!1,t.value={}},f=()=>{k.value=!1,m.value=null};return(e,l)=>{var C;return n(),o("div",S,[l[26]||(l[26]=s("h2",{class:"gradient-text"},"用户管理",-1)),s("div",j,[l[10]||(l[10]=s("div",{class:"users-header"},[s("button",{class:"add-user-btn glass"},[s("i",{class:"fas fa-plus"}),F(" 添加用户 ")])],-1)),s("div",z,[s("table",null,[l[9]||(l[9]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"用户名"),s("th",null,"邮箱"),s("th",null,"角色"),s("th",null,"状态"),s("th",null,"操作")])],-1)),s("tbody",null,[(n(!0),o(N,null,T(d.value,a=>(n(),o("tr",{key:a.id},[s("td",null,i(a.id),1),s("td",null,i(a.username),1),s("td",null,i(a.email),1),s("td",null,i(a.role),1),s("td",null,[s("span",{class:_(["status-badge",a.status])},i(a.status==="active"?"启用":"禁用"),3)]),s("td",null,[s("div",L,[s("button",{class:"edit-btn glass",onClick:M=>U(a)},l[7]||(l[7]=[s("i",{class:"fas fa-edit"},null,-1)]),8,O),s("button",{class:"delete-btn glass",onClick:M=>h(a)},l[8]||(l[8]=[s("i",{class:"fas fa-trash-alt"},null,-1)]),8,P)])])]))),128))])])])]),g.value?(n(),o("div",{key:0,class:"dialog-overlay",onClick:c},[s("div",{class:"dialog glass",onClick:l[5]||(l[5]=D(()=>{},["stop"]))},[s("div",R,[s("h3",q,i(y.value?"编辑用户":"添加用户"),1),s("button",{class:"close-btn",onClick:c},l[11]||(l[11]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",A,[s("div",G,[s("div",H,[l[13]||(l[13]=s("label",null,"用户名",-1)),s("div",J,[l[12]||(l[12]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-user"})],-1)),v(s("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>t.value.username=a),placeholder:"请输入用户名",class:_({"has-error":r.value.username})},null,2),[[x,t.value.username]])]),r.value.username?(n(),o("span",K,i(r.value.username),1)):b("",!0)]),s("div",Q,[l[15]||(l[15]=s("label",null,"邮箱",-1)),s("div",W,[l[14]||(l[14]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-envelope"})],-1)),v(s("input",{type:"email","onUpdate:modelValue":l[1]||(l[1]=a=>t.value.email=a),placeholder:"请输入邮箱",class:_({"has-error":r.value.email})},null,2),[[x,t.value.email]])]),r.value.email?(n(),o("span",X,i(r.value.email),1)):b("",!0)]),s("div",Y,[l[18]||(l[18]=s("label",null,"角色",-1)),s("div",Z,[v(s("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.role=a)},l[16]||(l[16]=[s("option",{value:"管理员"},"管理员",-1),s("option",{value:"普通用户"},"普通用户",-1)]),512),[[$,t.value.role]]),l[17]||(l[17]=s("i",{class:"fas fa-chevron-down"},null,-1))])]),s("div",ss,[l[23]||(l[23]=s("label",null,"状态",-1)),s("div",ls,[s("label",es,[v(s("input",{type:"radio","onUpdate:modelValue":l[3]||(l[3]=a=>t.value.status=a),value:"active"},null,512),[[w,t.value.status]]),l[19]||(l[19]=s("span",{class:"radio-button"},null,-1)),l[20]||(l[20]=s("span",null,"启用",-1))]),s("label",ts,[v(s("input",{type:"radio","onUpdate:modelValue":l[4]||(l[4]=a=>t.value.status=a),value:"inactive"},null,512),[[w,t.value.status]]),l[21]||(l[21]=s("span",{class:"radio-button"},null,-1)),l[22]||(l[22]=s("span",null,"禁用",-1))])])])])]),s("div",as,[s("button",{class:"cancel-btn glass",onClick:c},"取消"),s("button",{class:"confirm-btn",onClick:I,disabled:p.value},[p.value?(n(),o("i",is)):(n(),o("span",os,"确定"))],8,ns)])])])):b("",!0),k.value?(n(),o("div",{key:1,class:"dialog-overlay",onClick:f},[s("div",{class:"dialog",onClick:l[6]||(l[6]=D(()=>{},["stop"]))},[s("div",{class:"dialog-header"},[l[25]||(l[25]=s("h3",null,"删除确认",-1)),s("button",{class:"close-btn",onClick:f},l[24]||(l[24]=[s("i",{class:"fas fa-times"},null,-1)]))]),s("div",us,[s("p",null,'确定要删除用户 "'+i((C=m.value)==null?void 0:C.username)+'" 吗？',1)]),s("div",{class:"dialog-footer"},[s("button",{class:"cancel-btn",onClick:f},"取消"),s("button",{class:"delete-confirm-btn",onClick:E},"确定删除")])])])):b("",!0)])}}},ms=B(ds,[["__scopeId","data-v-27ad0a5e"]]);export{ms as default};
